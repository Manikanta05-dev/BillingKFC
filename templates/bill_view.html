{% extends "base.html" %}

{% block title %}KFC Bill #{{ bill[0] }} - KFC Bills{% endblock %}

{% block content %}
<div class="main-container">
    <div class="kfc-bill-banner" style="background: linear-gradient(135deg, #d62300 0%, #fff 100%); padding: 32px 0; text-align: center;">
        <img src="/static/BIGSAVE.jpeg" alt="KFC Bucket" style="width: 120px; height: 120px; object-fit: contain; border-radius: 24px; box-shadow: 0 8px 32px rgba(0,0,0,0.12); background: #fff;">
        <h1 style="color: #d62300; font-size: 2.5rem; font-weight: 700; margin: 16px 0 0 0;">KFC Bill #{{ bill[0] }}</h1>
    </div>
    <div class="custom-container py-5">
        <div class="custom-card" style="border: 2px solid #d62300;">
            <div class="custom-card-body">
                <div class="row mb-5">
                    <div class="col-md-6">
                        <h5 style="color: #d62300;">Bill To:</h5>
                        <p class="mb-1"><strong>{{ bill[1] }}</strong></p>
                        {% if bill[2] %}
                        <p class="mb-0">Table: {{ bill[2] }}</p>
                        {% endif %}
                    </div>
                    <div class="col-md-6 text-md-end">
                        <h5 style="color: #d62300;">Bill Details:</h5>
                        <p class="mb-1"><strong>Bill #:</strong> {{ bill[0] }}</p>
                        <p class="mb-1"><strong>Date:</strong> {{ bill[6][:19] }}</p>
                    </div>
                </div>
                <div class="table-responsive mb-4">
                    <table class="custom-table">
                        <thead style="background: #d62300; color: #fff;">
                            <tr>
                                <th>Item</th>
                                <th class="text-center">Quantity</th>
                                <th class="text-end">Unit Price</th>
                                <th class="text-end">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in items %}
                            <tr>
                                <td>{{ item[3] }}</td>
                                <td class="text-center">{{ item[0] }}</td>
                                <td class="text-end">${{ "%.2f"|format(item[1]) }}</td>
                                <td class="text-end">${{ "%.2f"|format(item[2]) }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <div class="col-md-6 offset-md-6">
                        <div class="custom-card" style="background: #fff8f5; border: 2px solid #d62300;">
                            <div class="custom-card-body">
                                <div class="flex-between mb-2">
                                    <span>Subtotal:</span>
                                    <span>${{ "%.2f"|format(bill[3]) }}</span>
                                </div>
                                <div class="flex-between mb-2">
                                    <span>Tax (10%):</span>
                                    <span>${{ "%.2f"|format(bill[4]) }}</span>
                                </div>
                                <hr>
                                <div class="flex-between">
                                    <strong class="fs-5">Total Amount:</strong>
                                    <strong class="fs-5" style="color: #d62300;">${{ "%.2f"|format(bill[5]) }}</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-5 pt-4 border-top">
                    <p class="text-muted mb-2">Thank you for dining with us at KFC!</p>
                    <p class="small text-muted">Please keep this bill for your records.</p>
                    <div class="mt-4">
                        <small class="text-muted">
                            Generated by KFC Bills System | {{ bill[6][:19] }}
                        </small>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4 no-print">
            <div class="col-12 text-center">
                <a href="{{ url_for('create_bill') }}" class="kfc-btn">Create New Bill</a>
                <a href="{{ url_for('view_bills') }}" class="kfc-btn kfc-btn-outline">All Bills</a>
                <a href="{{ url_for('index') }}" class="kfc-btn kfc-btn-outline">Home</a>
            </div>
        </div>
    </div>
</div>
<style>
.custom-container { max-width: 1200px; margin: 0 auto; padding: 24px; }
.custom-card { background: #fff; border-radius: 10px; box-shadow: 0 5px 15px rgba(214,35,0,0.08); margin-bottom: 24px; border: 2px solid #fff0ee; }
.custom-card-body { padding: 32px; }
.custom-btn { display: inline-block; padding: 10px 24px; border-radius: 20px; border: none; font-weight: 700; margin: 0 4px; text-decoration: none; cursor: pointer; transition: background 0.2s; }
.custom-btn.primary { background: #d62300; color: #fff; }
.custom-btn.primary:hover { background: #b71c00; }
.custom-btn.large { font-size: 1.1rem; padding: 14px 32px; }
.text-center { text-align: center; }
.text-muted { color: #7f8c8d; }
.fs-5 { font-size: 1.25rem; }
.flex-between { display: flex; justify-content: space-between; }
.kfc-btn { background: #d62300; color: #fff; font-weight: 700; border: none; border-radius: 20px; padding: 12px 32px; margin: 0 8px; transition: background 0.2s, color 0.2s, border 0.2s; }
.kfc-btn:hover { background: #b71c00; color: #fff; }
.kfc-btn-outline { background: #fff; color: #d62300; border: 2px solid #d62300; }
.kfc-btn-outline:hover { background: #d62300; color: #fff; }
@media (max-width: 900px) { .custom-container { padding: 12px; } }
</style>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'p') {
            e.preventDefault();
            window.print();
        }
    });
});
</script>
{% endblock %}